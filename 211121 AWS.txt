Amazon Virtual Private Cloud(VPC)를 사용하면 AWS 클라우드에서 논리적으로 격리된 공간을 프로비저닝하여 고객이 정의하는 가상 네트워크에서 AWS 리소스를 시작할 수 있습니다. IP 주소 범위 선택, 서브넷 생성, 라우팅 테이블 및 네트워크 게이트웨이 구성 등 가상 네트워킹 환경을 완벽하게 제어할 수 있습니다. VPC에서 IPv4와 IPv6를 모두 사용하여 리소스와 애플리케이션에 안전하고 쉽게 액세스할 수 있습니다.

VPC
private cloud를 만드는데 기본이 되는 리소스
논리적인 독립 네트워크
이름과 IPv4 CIDR 블록이 필수
지정된 CIDR 내에서 적절한 IP를 할당받게 됩니다.
VPC 의 최대 크기는 16
2^(32-16)=65536개의 IP를 사용가능
한번 지정된 CIDR은 변경 불가능
추가는 가능
같은 CIDR로 여러개의 VPC 사용가능
다만 너무 많은 VPC 가 겹칠 경우 IP가 겹쳐서 문제가 발생할 수 있음
내부의 CIDR 규칙과 외부의 IP 연결은 사용이 불가
ex. 52.12.0.0/16 의 VPC 에서 외부 IP 52.12.0.0/16 를 사용 불가
기본 VPC 의 CIDR 블록은 172.31.0.0/16

Subnet
Subnet은 물리적인 공간인 AZ과 연결 (1:1)
VPC는 논리적 범위, Subnet 은 물리적으로 리소스가 생성될 수 있는 네트워크
서브넷의 최대 크기는 VPC의 크기와 같음
하나의 VPC는 N개의 서브넷을 가질 수 있음
서브넷을 만들지 않을 수도 있지만, 이 경우 VPC로 아무것도 할 수 없음
서브넷의 넷마스크 범위는 16(65535개)에서 28(16개)을 사용할 수 있으며, VPC CIDR 블럭 범위에 속하는 CIDR 블럭을 지정할 수 있음.
리전에 따라서 사용가능한 가용존의 갯수는 다름

Route Table
서브넷에서 네트워크를 이용할 때는 이 라우트 테이블을 사용해서 목적지를 찾게 됩니다
VPC생성시 VPC 에 연결 (Subnet 과 연결 X)
라우트 테이블은 VPC에 속한 다수의 서브넷에서 사용할 수 있습니다.
기본 Route Table 은 VPC의 CIDR 블럭을 목적지로 하는 경우 타깃이 local인 규칙만 정의 되어 있습니다.

ex. VPC의 CIDR 블럭이 172.31.0.0/16일 때 이 네트워크 안에서 목적지가 172.31.0.0/16 범위에 있는 리소스를 찾는다면 VPC 내부에서 찾습니다
이 규칙은 삭제할 수 없습니다
인터넷을 연결하거나 다른 VPC와 통신하기 위해서는 라우트 테이블에 라우트 규칙을 추가적으로 정의해야만 합니다

Internet GateWay
VPC에서 생성된 리소스들은 기본적으로 인터넷을 사용할 수가 없습니다
라우팅 테이블에 인터넷 게이트웨이를 향하는 적절한 규칙을 추가해주면 특정 서브넷이 인터넷과 연결됩니다
서브넷과 인터넷 게이트웨이를 연결하는 것만으로는 인터넷을 사용할 수 없습니다. 인터넷을 사용하고자 하는 리소스는 퍼블릭 IP를 가지고 있어야합니다